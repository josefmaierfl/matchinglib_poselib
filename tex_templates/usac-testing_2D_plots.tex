\documentclass[a4paper]{article}
\usepackage[english]{babel}
\usepackage{textcomp}
\usepackage{amssymb}
\usepackage{bm}
\usepackage{amsmath}
\usepackage[htt]{hyphenat}
\usepackage{hyperref}
\BLOCK{ if abbreviations }
\usepackage[nopostdot,nogroupskip,style=super,nonumberlist,toc,sort=none]{glossaries-extra}
\BLOCK{ endif }
\usepackage{graphicx}%[pdftex] vor {} einfÃ¼gen
\usepackage{subfigure}
\usepackage{pgfplots}
\BLOCK{ if figs_externalize }
\usepgfplotslibrary{external}
\tikzexternalize[prefix=figures/]
\BLOCK{ endif }
%\usetikzlibrary{matrix,positioning}
\pgfplotsset{width=1.\textwidth,compat=newest}%,yticklabel style={text width=3em,align=left}}

\newcommand{\mli}[1]{\mathit{#1}}

\DeclareRobustCommand{\vect}[1]{\bm{#1}}
\pdfstringdefDisableCommands{%
  \renewcommand{\vect}[1]{#1}%
}

\BLOCK{ if abbreviations }
\BLOCK{ for abb in abbreviations}
\newglossaryentry{\VAR{ loop.index }}{name={\VAR{ abb['key'] }},description={\VAR{ abb['description'] }}}
\BLOCK{ endfor }
\BLOCK{ endif }

\begin{document}
\author{J. Maier}
\title{\VAR{title}}
\maketitle
\BLOCK{ if make_index }
\listoffigures
\newpage
\BLOCK{ endif }
\BLOCK{ if abbreviations }
\printunsrtglossary[title={List of Abbreviations}]
\newpage
\BLOCK{ endif }

\pgfplotscreateplotcyclelist{big variety}{
	teal,every mark/.append style={fill=teal!80!black},mark=*\\
	teal!70!white,densely dashed,every mark/.append style={fill=teal!80!black},mark=x\\
	orange,every mark/.append style={fill=orange!80!black},mark=square*\\
	orange!70!white,densely dashed,every mark/.append style={fill=orange!80!black},mark=+\\
	cyan!60!black,every mark/.append style={fill=cyan!80!black},mark=otimes*\\
	cyan!90!black,densely dashed,every mark/.append style={fill=cyan!80!black},mark=o\\
	red,every mark/.append style={fill=orange!80!black},mark=triangle*\\
	red!70!white,densely dashed,every mark/.append style={fill=orange!80!black},mark=triangle\\
	black,every mark/.append style={solid,fill=darkgray},mark=diamond*\\
	black!70!white,densely dashed,every mark/.append style={solid,fill=darkgray},mark=diamond\\
	blue,every mark/.append style={fill=blue!80!black},mark=halfdiamond*\\
	blue!70!white,densely dashed,every mark/.append style={fill=blue!80!black},mark=asterisk\\
	gray,every mark/.append style={fill=gray!90!black},mark=halfsquare right*\\
	gray!70!white,densely dashed,every mark/.append style={fill=gray!90!black},mark=10-pointed star\\
	magenta,every mark/.append style={fill=magenta!80!black},mark=halfsquare left*\\
	magenta!70!white,densely dashed,every mark/.append style={fill=magenta!80!black},mark=Mercedes star\\
	violet,every mark/.append style={fill=violet!80!black},mark=halfcircle*\\
	violet!70!white,densely dashed,every mark/.append style={fill=violet!80!black},mark=halfcircle\\
	brown!80!black,every mark/.append style={fill=brown!90!black},mark=pentagon*\\
	brown!50!black,densely dashed,every mark/.append style={fill=brown!90!black},mark=pentagon\\
	green!80!black,every mark/.append style={fill=green!90!black},mark=oplus*\\
	green!50!black,densely dashed,every mark/.append style={fill=green!90!black},mark=oplus\\
	teal!70!black,dashdotted,every mark/.append style={fill=teal!80!black},mark=oplus*\\
	orange!70!black,dashdotted,every mark/.append style={fill=orange!80!black},mark=pentagon*\\
	cyan!40!black,dashdotted,every mark/.append style={fill=cyan!80!black},mark=halfcircle*\\
	red!70!black,dashdotted,every mark/.append style={fill=orange!80!black},mark=halfsquare left*\\
	black!90!white,dashdotted,every mark/.append style={solid,fill=darkgray},mark=halfsquare right*\\
	blue!70!black,dashdotted,every mark/.append style={fill=blue!80!black},mark=halfsquare*\\
	gray!70!black,dashdotted,every mark/.append style={fill=gray!90!black},mark=diamond*\\
	magenta!70!black,dashdotted,every mark/.append style={fill=magenta!80!black},mark=triangle*\\
	violet!70!black,dashdotted,every mark/.append style={fill=violet!80!black},mark=otimes*\\
	brown,dashdotted,every mark/.append style={fill=brown!90!black},mark=square*\\
	green,dashdotted,every mark/.append style={fill=green!90!black},mark=*\\
	teal,densely dashdotdotted,every mark/.append style={fill=teal!80!black},mark=square*\\
	orange,densely dashdotdotted,every mark/.append style={fill=orange!80!black},mark=*\\
	cyan!60!black,densely dashdotdotted,every mark/.append style={fill=cyan!80!black},mark=triangle*\\
	red,densely dashdotdotted,every mark/.append style={fill=orange!80!black},mark=otimes*\\
	black,densely dashdotdotted,every mark/.append style={solid,fill=darkgray},mark=halfdiamond*\\
	blue,densely dashdotdotted,every mark/.append style={fill=blue!80!black},mark=diamond*\\
	gray,densely dashdotdotted,every mark/.append style={fill=gray!90!black},mark=oplus*\\
	magenta,densely dashdotdotted,every mark/.append style={fill=magenta!80!black},mark=halfsquare right*\\
	violet,densely dashdotdotted,every mark/.append style={fill=violet!80!black},mark=pentagon*\\
	brown!80!black,densely dashdotdotted,every mark/.append style={fill=brown!90!black},mark=halfcircle*\\
	green!80!black,densely dashdotdotted,every mark/.append style={fill=green!90!black},mark=halfsquare left*\\
}

\BLOCK{ for sec in sections}
\BLOCK{ if sec['caption'] is not none }
%\section{\VAR{ sec['caption'] }}
\BLOCK{ else }
%\caption{\VAR{ sec['name'] }}
\BLOCK{ endif }

\BLOCK{ if make_index }
\begin{figure}
\centering
\BLOCK{ endif }
\BLOCK{ if ctrl_fig_size }
\BLOCK{ if sec['fig_type'] == 'ybar' }
\resizebox{%
	\ifdim\width>0.98\textwidth
        0.98\textwidth
    \else
        \width
    \fi
}{!}{%
\BLOCK{ else }
\resizebox*{!}{%
	\ifdim\height>0.95\textheight
        0.95\textheight
    \else
        \height
    \fi
}{%
\BLOCK{ endif }
\BLOCK{ endif }
\BLOCK{ if not make_index and not ctrl_fig_size }
\begin{center}
\BLOCK{ endif }
\BLOCK{ if sec['use_string_labels'] or sec['fig_type'] == 'xbar' or sec['fig_type'] == 'ybar' }
\pgfplotstableread[col sep=semicolon]{\VAR{ sec['file'] }}\datatable
\BLOCK{ endif }
\begin{tikzpicture}
\begin{axis}[
align=center,%
\BLOCK{ if sec['enlarge_title_space'] }
title style={align=center,yshift=2.1ex},%
\BLOCK{ endif }
\BLOCK{ if sec['use_log_y_axis'] and sec['fig_type'] == 'xbar' }
xmode=log,%
log origin=infty,%
\BLOCK{ elif sec['use_log_y_axis'] }
ymode=log,%
\BLOCK{ if sec['fig_type'] == 'ybar' }
log origin=infty,%
\BLOCK{ endif }
\BLOCK{ endif }
\BLOCK{ if sec['fig_type'] == 'xbar' }
xbar,%
ylabel=\VAR{sec['label_x']},%
xlabel=\VAR{sec['label_y']},%
\BLOCK{ if sec['plots']|length > 1 }
y=\VAR{ (0.4 + 0.35 * sec['plots']|length)|round(2) }cm,%
bar width=0.3cm,%
enlarge y limits={true, abs value=0.75},%
\BLOCK{ elif sec['xaxis_txt_rows'] > 1 }
y=\VAR{ sec['xaxis_txt_rows'] * 12 }pt,%
\BLOCK{ endif }
ytick=data,%
yticklabels from table={\datatable}{\VAR{ sec['plot_x'] }},%
\BLOCK{ if sec['use_string_labels'] }
y tick label style={rotate=45,anchor=east,align=right,font=\scriptsize,/pgf/number format/precision=4},%
\BLOCK{ endif }
\BLOCK{ elif sec['fig_type'] == 'ybar' }
ybar,%
xlabel=\VAR{sec['label_x']},%
ylabel=\VAR{sec['label_y']},%
\BLOCK{ if sec['plots']|length > 1 }
x=\VAR{ (0.4 + 0.35 * sec['plots']|length)|round(2) }cm,%
bar width=0.3cm,%
enlarge x limits={true, abs value=0.75},%
\BLOCK{ elif sec['xaxis_txt_rows'] > 1 }
x=\VAR{ sec['xaxis_txt_rows'] * 12 }pt,%
\BLOCK{ endif }
xtick=data,%
xticklabels from table={\datatable}{\VAR{ sec['plot_x'] }},%
\BLOCK{ if sec['use_string_labels'] }
x tick label style={rotate=45,anchor=east,align=right,font=\scriptsize,/pgf/number format/precision=4},%
\BLOCK{ endif }
\BLOCK{ elif sec['use_string_labels'] }
xtick=data,%
xticklabels from table={\datatable}{\VAR{ sec['plot_x'] }},%
x tick label style={rotate=45,anchor=east,align=right,font=\scriptsize,/pgf/number format/precision=4},%
xlabel=\VAR{sec['label_x']},%
ylabel=\VAR{sec['label_y']},%
\BLOCK{ else }
xlabel=\VAR{sec['label_x']},%
ylabel=\VAR{sec['label_y']},%
\BLOCK{ endif }
xticklabel style={/pgf/number format/precision=4},%
yticklabel style={/pgf/number format/precision=4},%
\BLOCK{ if sec['limits']['miny'] is not none }
\BLOCK{ if sec['fig_type'] == 'xbar' }
xmin=\VAR{sec['limits']['miny']},
\BLOCK{ else }
ymin=\VAR{sec['limits']['miny']},
\BLOCK{ endif }
\BLOCK{ endif }
\BLOCK{ if sec['limits']['maxy'] is not none }
\BLOCK{ if sec['fig_type'] == 'xbar' }
xmax=\VAR{sec['limits']['maxy']},
\BLOCK{ else }
ymax=\VAR{sec['limits']['maxy']},
\BLOCK{ endif }
\BLOCK{ endif }
title={\VAR{ sec['name'] }},
\BLOCK{ if sec['legend'] }
legend style={
\BLOCK{ if sec['use_string_labels'] or (sec['plots']|length > 1 and sec['fig_type'] == 'ybar') }
	at={(0.5,-0.25)},
\BLOCK{ elif sec['enlarge_lbl_dist'] }
    at={(0.5,-\VAR{ sec['enlarge_lbl_dist'] })},
\BLOCK{ else }
	at={(0.5,-0.12)},
\BLOCK{ endif }
	anchor=north,
	legend columns=\VAR{sec['legend_cols']},
	},
\BLOCK{ endif }
cycle list name=big variety,
\BLOCK{ if fill_bar and (sec['fig_type'] == 'xbar' or sec['fig_type'] == 'ybar') }
every axis plot/.append style={fill,draw=none,no markers},%
\BLOCK{ endif }
]
\BLOCK{ for it in sec['plots'] }
\addplot+ [%
\BLOCK{ if sec['fig_type'] != 'xbar' and sec['fig_type'] != 'ybar' }
\VAR{sec['fig_type']}\BLOCK{ if not sec['use_marks'] },no markers\BLOCK{ endif },
\BLOCK{ else }
\BLOCK{ if not sec['use_marks'] or fill_bar }
no markers,%
\BLOCK{ endif }
\BLOCK{ endif }
unbounded coords=discard] table [%
col sep=semicolon,%
\BLOCK{ if sec['fig_type'] == 'xbar' }
y expr=\coordindex,%
x=\VAR{ it }
\BLOCK{ elif sec['use_string_labels'] or sec['fig_type'] == 'ybar' }
x expr=\coordindex,%
y=\VAR{ it }
\BLOCK{ else }
x=\VAR{ sec['plot_x'] },%
y=\VAR{ it }
\BLOCK{ endif }
] {\VAR{ sec['file'] }};
\BLOCK{ endfor }

\BLOCK{ if sec['legend'] }
\legend{\BLOCK{ for it in sec['legend'] } \VAR{ it },\BLOCK{ endfor }}
\BLOCK{ endif }
\end{axis}
\end{tikzpicture}
\BLOCK{ if ctrl_fig_size }
}
\BLOCK{ endif }
\BLOCK{ if make_index }
\BLOCK{ if sec['caption'] is not none }
\caption{\VAR{ sec['caption'] }}
\BLOCK{ else }
\caption{\VAR{ sec['name'] }}
\BLOCK{ endif }
\end{figure}
\BLOCK{ endif }
\BLOCK{ if not make_index and not ctrl_fig_size }
\end{center}
\BLOCK{ endif }

\BLOCK{ endfor }

\end{document}
